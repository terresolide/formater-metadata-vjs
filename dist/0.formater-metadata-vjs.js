webpackJsonp([0],{304:function(t,e,a){var o=a(2)(a(309),a(318),function(t){a(322)},null,null),n=a(306);"function"==typeof n&&n(o),t.exports=o.exports},305:function(t,e){t.exports=function(t){t.options.__i18n='{"en":{},"fr":{}}'}},306:function(t,e){t.exports=function(t){t.options.__i18n='{"en":{"resource_contact":"Resource Contact | Resource Contacts","metadata_contact":"Metadata Contact | Metadata Contacts"},"fr":{"resource_contact":"Contact pour les données| Contacts pour les données","metadata_contact":"Contact pour les métadonnées | Contacts pour les métadonnées"}}'}},307:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"FormaterContact",components:{},props:{contact:{type:Array,default:[]},lang:{type:String,default:"en"}},watch:{lang:function(t){this.$i18n.locale=t,this.$setGnLocale(this.lang)},contact:function(t){console.log(t)}},data:function(){return{fields:null}},mounted:function(){console.log(this.contact),this.fields=this.contact,this.$i18n.locale=this.lang,this.$setGnLocale(this.lang)},methods:{}}},308:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"FormaterExportLinks",components:{},props:{uuid:{type:String,default:null},lang:{type:String,default:"en"}},data:function(){return{xml:null,pdf:null}},mounted:function(){console.log("mounted"),this.$setGnLocale(this.lang),this.xml="http://demo.formater/geonetwork/srv/api/records/"+this.uuid+"/formatters/xml?attachment=true",this.pdf="http://demo.formater/geonetwork/srv/api/records/"+this.uuid+"/formatters/xsl-view?root=div&output=pdf",console.log(this.$gnLang)}}},309:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(315),n=a.n(o),s=a(317),i=a.n(s),r=a(316),c=a.n(r);e.default={name:"FormaterMetadata",components:{FormaterContact:n.a,FormaterQuicklooks:i.a,FormaterExportLinks:c.a},props:{lang:{type:String,default:"en"},metadata:{type:Object,default:null},url:{type:String,default:null}},watch:{lang:function(t){this.$i18n.locale=t}},data:function(){return{tabs:[{title:"Aperçu",value:"tab1"},{title:"Complet",value:"tab2"}],currentTab:"tab1",meta:null,uuid:null,popstateListener:null,keydownListener:null,contacts:{metadata:{},resource:{}}}},created:function(){this.$i18n.locale=this.lang,this.$setGnLocale(this.lang),this.popstateListener=this.close.bind(this),document.addEventListener("popstate",this.popstateListener),this.keydownListener=this.checkEscape.bind(this),document.addEventListener("keydown",this.keydownListener)},mounted:function(){this.metadata&&(this.meta=this.metadata,this.fillMetadata())},destroyed:function(){document.removeEventListener("popstate",this.popstateListener),this.popstateListener=null,document.removeEventListener("keydown",this.keydownListener),this.keydownListener=this.checkEscape.bind(this)},methods:{checkEscape:function(t){("key"in(t=t||window.event)?"Escape"===t.key||"Esc"===t.key:27===t.keyCode)&&this.close(t)},close:function(t){t.preventDefault(),this.$emit("close")},fillMetadata:function(){if(this.uuid=this.meta["geonet:info"].uuid,console.log(this.uuid),this.meta._locale!==this.meta.docLocale){var t="http://demo.formater/geonetwork/srv/"+this.meta.docLocale+"/q?_content_type=json&fast=index&uuid="+this.uuid,e=this;this.$http.get(t).then(function(t){console.log(t.body),e.extract(t.body.metadata)})}else this.extract()},extract:function(t){this.extractContact(t)},extractContact:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(console.log(t),this.contacts={resource:{},metadata:{}},console.log(this.meta.responsibleParty),this.meta.responsibleParty){var e=this;this.meta.responsibleParty.forEach(function(t){var a=t.split("|");"metadata"===a[1]||"metadonnées"===a[1]?e.contacts.metadata[a[0]]?e.contacts.metadata[a[0]].push(a):e.contacts.metadata[a[0]]=[a]:e.contacts.resource[a[0]]?e.contacts.resource[a[0]].push(a):e.contacts.resource[a[0]]=[a]})}else if(t.responsibleParty){console.log("loop");e=this;t.responsibleParty.forEach(function(t){var a=t.split("|");"metadata"===a[1]||"metadonnées"===a[1]?e.contacts.metadata[a[0]]?e.contacts.metadata[a[0]].push(a):e.contacts.metadata[a[0]]=[a]:e.contacts.resource[a[0]]?e.contacts.resource[a[0]].push(a):e.contacts.resource[a[0]]=[a]})}console.log(this.contacts)}}}},310:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"FormaterQuicklooks",components:{},props:{quicklooks:{type:String|Array,default:null}},data:function(){return{images:null,selected:0}},mounted:function(){this.images=this.quicklooks}}},311:function(t,e,a){(t.exports=a(1)()).push([t.i,".fmt-metadata{position:relative;padding:10px;max-width:900px;margin:auto;height:auto;overflow:hidden}.fmt-metadata span.fmt-metadata-close{position:absolute;top:3px;right:5px;cursor:pointer;opacity:.5}.fmt-metadata span.fmt-metadata-close:hover{opacity:1}.fmt-metadata h1.fmt-metadata-header div{float:left;width:calc(100% - 130px);display:inline-block}.fmt-metadata h1.fmt-metadata-header i.fa{float:left}.fmt-metadata i.fa{margin-right:12px}.fmt-metadata h1,.fmt-metadata h2,.fmt-metadata h3,.fmt-metadata h4{max-width:100%;color:#754a15}.fmt-metadata h2{font-size:1.2rem;margin-bottom:0}.fmt-metadata h1{font-size:1.5rem}.fmt-metadata .fmt-tab-export,.fmt-metadata div.fmt-tab{display:inline-block;padding:5px 10px;border:1px dotted grey;border-top:0;background:#eee;cursor:pointer}.fmt-metadata .fmt-tab-export:hover,.fmt-metadata div.fmt-tab:hover{background:#ccc}.fmt-metadata div.fmt-tab.selected{background:#ddd}.fmt-metadata div.fmt-description{line-height:1.5}.fmt-metadata .fmt-group-logo{float:right;margin-top:-5px}.fmt-metadata .fmt-group-logo img{max-width:100px;height:40px}.fmt-metadata .fmt-contacts h3{margin-bottom:0}",""])},312:function(t,e,a){(t.exports=a(1)()).push([t.i,".fmt-export-links{float:right;margin-right:5px}.fmt-tab-export{min-width:80px;text-align:center}.fmt-export-links div.fmt-expand{display:none;text-align:center;position:absolute;min-width:102px}.fmt-export-links div.fmt-expand div{line-height:2;padding:3px 0;background:#eee;border:1px dotted grey;border-top:0}.fmt-export-links a{color:#000;text-decoration:none}.fmt-export-links div.fmt-expand div:hover{background:#ccc}.fmt-tab-export:hover+div.fmt-expand,div.fmt-expand:hover{display:block}",""])},313:function(t,e,a){(t.exports=a(1)()).push([t.i,".formater-contact{font-size:1em;max-width:300px;min-width:250px;margin:5px 10px;float:left}.formater-contact h3{margin-bottom:0}.formater-contact h3+div{margin-left:24px;margin-bottom:5px}.formater-contact .formater-address{margin-left:20px}.formater-contact .formater-organism{font-weight:800}",""])},314:function(t,e,a){(t.exports=a(1)()).push([t.i,".fmt-quicklooks{position:relative;float:left;max-width:340px;max-height:260px;background:#ddd;margin:0 15px 10px 0}.fmt-quicklooks div.wrapper{text-align:center;max-width:340px;max-height:260px;line-height:260px;margin:auto;width:340px;height:260px}.fmt-quicklooks div.wrapper div{display:none}.fmt-quicklooks div.wrapper .selected{display:inline-block;text-align:center;vertical-align:middle;margin:auto}.fmt-quicklooks img{width:100%;max-width:320px;max-height:260px;display:block;vertical-align:middle}.fmt-quicklooks .fa-chevron-circle-left,.fmt-quicklooks .fa-chevron-circle-right{position:absolute;font-size:40px;top:110px;z-index:1;opacity:0}.fmt-quicklooks:hover .fa{opacity:.3}.fmt-quicklooks .fa-chevron-circle-left:hover,.fmt-quicklooks .fa-chevron-circle-right:hover{opacity:.7}.fmt-metadata .fmt-quicklooks .fa-chevron-circle-right{right:1px;margin-right:0}.fmt-metadata .fmt-quicklooks .fa-chevron-circle-left{left:1px;margin-left:0}",""])},315:function(t,e,a){var o=a(2)(a(307),a(320),function(t){a(324)},null,null),n=a(305);"function"==typeof n&&n(o),t.exports=o.exports},316:function(t,e,a){var o=a(2)(a(308),a(319),function(t){a(323)},null,null);t.exports=o.exports},317:function(t,e,a){var o=a(2)(a(310),a(321),function(t){a(325)},null,null);t.exports=o.exports},318:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fmt-metadata fmt-capsule"},[a("span",{staticClass:"fmt-metadata-close fa fa-close",on:{click:t.close}}),t._v(" "),t.meta?a("div",[a("h1",{staticClass:"fmt-metadata-header"},[t.meta.groupWebsite?a("a",{staticClass:"fmt-group-logo",attrs:{href:t.meta.groupWebsite,title:t.$gn("group-"+t.meta.groupOwner),starget:"_blank"}},[a("img",{attrs:{src:t.meta.logo}})]):a("a",{staticClass:"fmt-group-logo",attrs:{href:"#",alt:t.$gn("group-"+t.meta.groupOwner),title:t.$gn("group-"+t.meta.groupOwner)}},[a("img",{attrs:{src:t.meta.logo}})]),t._v(" "),["dataset","serie"].indexOf(t.meta.type)>=0?a("i",{staticClass:"fa fa-database"}):t._e(),t._v(" "),a("div",[t._v("\n          \n          "+t._s(t.meta.title?t.meta.title:t.meta.defaultTitle)+"\n          ")])]),t._v(" "),a("hr",{staticStyle:{border:"1px solid grey","margin-bottom":"0px",clear:"both"}}),t._v(" "),a("div",{staticClass:"fmt-tabs"},[t._l(t.tabs,function(e,o){return a("div",{staticClass:"fmt-tab",class:{selected:t.currentTab===e.value},on:{click:function(a){t.currentTab=e.value}}},[t._v(t._s(e.title))])}),t._v(" "),t.uuid?a("formater-export-links",{attrs:{uuid:t.uuid}}):t._e()],2),t._v(" "),"tab1"===t.currentTab?a("div",{staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"fmt-description"},[a("formater-quicklooks",{attrs:{quicklooks:t.meta.images}}),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.meta.description)}})],1),t._v(" "),t.contacts.resource?a("div",{staticClass:"fmt-contacts"},[a("h2",[a("i",{staticClass:"fa fa-users"}),t._v(t._s(t.$tc("resource_contact",Object.keys(t.contacts.resource).length)))]),t._v(" "),t._l(t.contacts.resource,function(e,o){return a("div",{key:o,staticStyle:{float:"left"}},[a("h3",[a("i",{staticClass:"fa fa-user"}),t._v(t._s(t.$gn(o)))]),t._v(" "),t._l(e,function(e,o){return a("formater-contact",{key:o,attrs:{contact:e,lang:t.lang}})})],2)}),t._v(" "),a("div",{staticStyle:{clear:"both"}})],2):t._e(),t._v(" "),t.contacts.metadata?a("div",{staticClass:"fmt-contacts"},[a("h2",[a("i",{staticClass:"fa fa-users"}),t._v(t._s(t.$tc("metadata_contact",Object.keys(t.contacts.metadata).length)))]),t._v(" "),t._l(t.contacts.metadata,function(e,o){return a("div",{key:o},[a("h3",[a("i",{staticClass:"fa fa-user"}),t._v(t._s(t.$gn(o)))]),t._v(" "),t._l(e,function(e,o){return a("formater-contact",{key:o,attrs:{contact:e,lang:t.lang}})})],2)})],2):t._e()]):t._e(),t._v(" "),"tab2"===t.currentTab?a("div",[t._v("sous forme de xml")]):t._e()]):t._e()])},staticRenderFns:[]}},319:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"fmt-export-links"},[a("div",{staticClass:"fmt-tab-export"},[a("i",{staticClass:"fa fa-chevron-down"}),t._v(" "),a("span",{},[t._v(t._s(t.$gn("export")))])]),t._v(" "),a("div",{staticClass:"fmt-expand"},[a("div",[a("a",{attrs:{href:t.xml}},[t._v(t._s(t.$gn("exportXML")))])]),t._v(" "),a("div",[a("a",{attrs:{href:t.pdf,target:"_blank"}},[t._v(t._s(t.$gn("exportPDF")))])])])])},staticRenderFns:[]}},320:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.fields?a("span",{staticClass:"formater-contact"},[a("div",{staticClass:"formater-address"},[a("div",{staticClass:"formater-organism"},[t._v(t._s(t.fields[2]))]),t._v(" "),t.fields[3]?a("div",{staticClass:"formater-name"},[t._v(t._s(t.fields[3]))]):t._e(),t._v(" "),a("div",{staticClass:"formater-email"},[t._v(t._s(t.fields[4]))])])]):t._e()},staticRenderFns:[]}},321:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.images?a("span",{staticClass:"fmt-quicklooks"},[t.selected>0?a("i",{staticClass:"fa fa-chevron-circle-left",on:{click:function(e){t.selected-=1}}}):t._e(),t._v(" "),t.images.length>0&&t.selected<t.images.length-1?a("i",{staticClass:"fa fa-chevron-circle-right",on:{click:function(e){t.selected+=1}}}):t._e(),t._v(" "),a("div",{staticClass:"wrapper"},t._l(t.images,function(e,o){return a("div",{key:o,class:{selected:t.selected===o}},[a("img",{attrs:{src:e[1],alt:e[2]}})])}),0)]):t._e()},staticRenderFns:[]}},322:function(t,e,a){var o=a(311);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(3)("2df27e4f",o,!0,{})},323:function(t,e,a){var o=a(312);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(3)("5afc5644",o,!0,{})},324:function(t,e,a){var o=a(313);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(3)("3835855a",o,!0,{})},325:function(t,e,a){var o=a(314);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(3)("13a0d503",o,!0,{})}});
//# sourceMappingURL=0.formater-metadata-vjs.js.map
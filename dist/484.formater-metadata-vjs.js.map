{"version":3,"file":"484.formater-metadata-vjs.js","mappings":"0GAAAA,EAAOC,QAAU,SAAUC,GACzBA,EAAUC,QAAQC,OAASF,EAAUC,QAAQC,QAAU,GACvDF,EAAUC,QAAQC,OAAOC,KAAK,mFACvBH,EAAUC,QAAQG,KAC3B,C,4DCJA,I,6QC0DA,IAKA,UAQA,MCvE0K,EDuE1K,CACA,sBACA,YACA,qBACA,iBACA,+BACA,iBAnBA,gDAoBA,0BAIA,KAXA,WAYA,OACA,cACA,kBACA,UACA,SACA,UACA,mBACA,mBAIA,sBACA,WACA,yBACA,wBACA,kBAEA,4CACA,kBAEA,EACA,OACA,OADA,SACA,KAIA,wBACA,kCAKA,iBACA,sBAGA,GAEA,QAlDA,WAoDA,kCACA,uBAGA,yBACA,qCAEA,sCAGA,0BAQA,iDACA,yDAYA,EACA,QApFA,WA0FA,EACA,UA3FA,WA8FA,0EACA,8BACA,wEACA,4BAIA,EACA,SAIA,gBAJA,WAIA,WACA,2CACA,8CACA,EACA,gBARA,WAQA,WACA,mBAEA,IAGA,kHACA,0BAJA,CACA,2CAGA,MACA,uCACA,kCACA,EACA,YAnBA,WAmBA,WACA,8BACA,2BADA,CAIA,OACA,2CACA,6DAOA,iFACA,kFACA,oCACA,uCACA,kCAdA,CAeA,EACA,gBAvCA,SAuCA,GACA,4BACA,8CAEA,yBACA,sDACA,uCACA,sFACA,mFACA,yBACA,EACA,cAlDA,SAkDA,GACA,+DAEA,wDACA,+EACA,yBACA,EACA,cAzDA,SAyDA,GACA,SAEA,KACA,qDACA,kCACA,uCACA,iBACA,eAEA,8DACA,iBAEA,sBAEA,GADA,qBACA,wBACA,OAWA,aAVA,eACA,uBACA,qGACA,0BACA,6BAEA,8BACA,IAEA,qCACA,EACA,UACA,yBACA,kDACA,MACA,kBACA,uEACA,qBACA,0BACA,kCAEA,6BAEA,IACA,MACA,2BACA,yHACA,MACA,6BACA,gEACA,MACA,2BACA,2CACA,MACA,0BACA,kCAIA,eACA,2FACA,qGAEA,gBACA,oBAEA,+CACA,GACA,gEACA,6DAEA,uCACA,mFACA,yBACA,EACA,mBAjIA,WAkIA,yEACA,8DAEA,6DACA,uDAEA,EACA,YAzIA,WA0IA,oEACA,0BACA,2CAEA,EACA,gBA/IA,SA+IA,GACA,yCACA,cACA,mCAGA,kCACA,yDACA,WACA,OACA,IAEA,kDACA,gDACA,SACA,gDACA,iFACA,SACA,OACA,UACA,CACA,uDACA,mDACA,sFACA,+EACA,SACA,eACA,CACA,OACA,+BACA,gCAEA,sCAEA,EACA,MAlLA,WAmLA,wCACA,gCACA,uEACA,8DAEA,EACA,KAzLA,WAgMA,EACA,YAjMA,SAiMA,GACA,uBAEA,MACA,gCAEA,iBAGA,mBAQA,EAgDA,cAlQA,SAkQA,GAOA,8GAEA,EACA,WA5QA,WA6QA,iCACA,I,wBE3boM,Q,MAAA,GCOpM,IAAIC,GAAY,OACd,GJRW,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACF,EAAIK,GAAGL,EAAIM,GAAGN,EAAIO,kBAAkBP,EAAIK,GAAG,KAAKH,EAAG,sBAAsBF,EAAIK,GAAG,KAAKH,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,gBAAgB,CAACM,MAAM,CAAC,aAAe,EAAE,MAAQ,MAAM,GAAGR,EAAIK,GAAG,KAAKH,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACM,MAAM,CAAC,GAAK,iBAAiBR,EAAIK,GAAG,KAAML,EAAIS,OAAOC,MAAMC,UAAWT,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACF,EAAIK,GAAGL,EAAIM,GAAGN,EAAIY,GAAG,eAAeV,EAAG,MAAMA,EAAG,OAAO,CAACE,YAAY,+BAA+BJ,EAAIa,KAAKb,EAAIK,GAAG,KAAML,EAAIS,OAAOC,MAAMI,MAAOZ,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,wBAAwBW,GAAG,CAAC,MAAQf,EAAIgB,cAAchB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIS,OAAOC,MAAMI,YAAYd,EAAIa,KAAKb,EAAIK,GAAG,KAAML,EAAIS,OAAOC,MAAMO,iBAAkBf,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACA,EAAG,oBAAoB,CAACM,MAAM,CAAC,SAAWR,EAAIS,OAAOC,MAAMO,iBAAiB,OAAS,GAAGF,GAAG,CAAC,MAAQf,EAAIkB,gBAAgB,KAAKlB,EAAIa,KAAKb,EAAIK,GAAG,KAAML,EAAImB,SAAUjB,EAAG,oBAAoB,CAACM,MAAM,CAAC,SAAWR,EAAImB,SAAS,KAAOnB,EAAIoB,aAAa,MAAQ,GAAGL,GAAG,CAAC,iBAAmBf,EAAIqB,cAAc,MAAQrB,EAAIsB,SAAStB,EAAIa,MAAM,MAAM,EACnuC,GACqB,IISpB,EACA,KACA,KACA,MAMoB,mBAAX,GAAuB,EAAOd,GAEzC,QAAeA,EAAiB,O","sources":["webpack://formater-metadata-vjs/./src/formater-single.vue?e898","webpack://formater-metadata-vjs/./src/formater-single.vue","webpack://formater-metadata-vjs/src/formater-single.vue","webpack://formater-metadata-vjs/./src/formater-single.vue?f28d","webpack://formater-metadata-vjs/./src/formater-single.vue?92f0","webpack://formater-metadata-vjs/./src/formater-single.vue?5e38"],"sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"searching\":\"Searching\"},\"fr\":{\"searching\":\"Recherche en cours\"}}')\n  delete Component.options._Ctor\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mtdt-catalogue\"},[_c('div',[_vm._v(_vm._s(_vm.metaDisplayed))]),_vm._v(\" \"),_c('formater-draw-bbox'),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"mtdt-column-left\"},[_c('formater-form',{attrs:{\"disableLevel\":1,\"depth\":1}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mtdt-column-right\"},[_c('div',{attrs:{\"id\":\"fmtLargeMap\"}}),_vm._v(\" \"),(_vm.$store.state.searching)?_c('div',{staticClass:\"fmt-waiting\"},[_c('div',[_vm._v(_vm._s(_vm.$t('searching'))),_c('br'),_c('span',{staticClass:\"fa fa-spinner animated\"})])]):_vm._e(),_vm._v(\" \"),(_vm.$store.state.error)?_c('div',{staticClass:\"fmt-error\"},[_c('div',[_c('span',{staticClass:\"fa fa-close fmt-close\",on:{\"click\":_vm.closeError}}),_vm._v(_vm._s(_vm.$store.state.error))])]):_vm._e(),_vm._v(\" \"),(_vm.$store.state.selectedMetadata)?_c('div',{staticClass:\"mtdt-free-capsule\"},[_c('div',[_c('formater-metadata',{attrs:{\"metadata\":_vm.$store.state.selectedMetadata,\"depth\":-1},on:{\"close\":_vm.closeSingle}})],1)]):_vm._e(),_vm._v(\" \"),(_vm.metadata)?_c('formater-metadata',{attrs:{\"metadata\":_vm.metadata,\"full\":_vm.fullMetadata,\"depth\":1},on:{\"parametersChange\":_vm.setParameters,\"close\":_vm.close}}):_vm._e()],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Main component\n */\n<i18n>{\n   \"en\":{\n     \"searching\": \"Searching\"\n   },\n   \"fr\":{\n     \"searching\": \"Recherche en cours\"\n   }\n}\n</i18n>\n<template>\n <div class=\"mtdt-catalogue\">\n <div>{{metaDisplayed}}</div>\n  <!-- components not visible  -->\n\n\n  <!-- component to draw bbox -->\n  <formater-draw-bbox ></formater-draw-bbox>\n\n  <div >\n   <!-- components can be view -->\n \n   <div class=\"mtdt-column-left\" >\n       <formater-form  :disableLevel=\"1\" :depth=\"1\"></formater-form>\n   </div>\n   <div class=\"mtdt-column-right\" >\n        <!-- div where append map when enlarge it -->\n        <div id=\"fmtLargeMap\"></div>\n        <!-- icon search -->\n        <div class=\"fmt-waiting\" v-if=\"$store.state.searching\"><div>{{$t('searching')}}<br /><span class=\"fa fa-spinner animated\"></span></div></div>\n        \n        <!--error msg -->\n        <div class=\"fmt-error\" v-if=\"$store.state.error\"><div><span class=\"fa fa-close fmt-close\" @click=\"closeError\"></span>{{$store.state.error}}</div></div>\n        \n        <!-- independant metadata -->\n        <div class=\"mtdt-free-capsule\" v-if=\"$store.state.selectedMetadata\" >\n          <div >\n            <formater-metadata :metadata=\"$store.state.selectedMetadata\"  :depth=\"-1\" @close=\"closeSingle\"></formater-metadata>\n          </div>\n        </div>\n       <formater-metadata v-if=\"metadata\" :metadata=\"metadata\" :full=\"fullMetadata\" @parametersChange=\"setParameters\" @close=\"close\" :depth=\"1\"></formater-metadata>\n     \n        <!-- view of one record -->\n       <!--   <div>\n        <formater-metadata v-for=\"(meta, index) in metadatas\" :key=\"index\" v-show=\"index === metadatas.length-1\"\n         :depth=\"index + 1\" :metadata=\"meta\" @parametersChange=\"setParameters\"\n         @close=\"close\" ></formater-metadata>\n        </div> -->\n\n     </div>\n    </div>\n  </div>\n</template>\n<script>\nimport FormaterForm from './components/formater-form.vue';\nimport FormaterListMetadata from './components/formater-list-metadata.vue';\nconst FormaterMetadata = () => import('./components/formater-metadata.vue')\nimport FormaterPaging from './components/formater-paging.vue';\nimport FormaterDrawBbox from './components/formater-draw-bbox.vue';\n// import AerisTheme from 'aeris-commons-components-vjs/src/aeris-theme/aeris-theme.vue'\n\nconst JSONPATH = require('jsonpath')\n// prevent previous and next page for browser\n// function disableBack() { window.history.forward() }\n// window.onload = function () {\n//   disableBack();\n// }\n//   window.onpageshow = function(evt) { if (evt.persisted) disableBack() }\n//   window.onbeforeunload = function() { return \"Your work will be lost.\"; };\nexport default {\n  name: 'FormaterSingle',\n  components: {\n    FormaterDrawBbox,\n    FormaterForm,\n    FormaterListMetadata,\n    FormaterMetadata,\n    FormaterPaging,\n   // FormaterRequester,\n   // AerisTheme\n  },\n  data() {\n    return {\n      metadata: null,\n      fullMetadata: null,\n      uuid: null,\n      first: true,\n      sortBy: '',\n      metaDisplayed: null,\n      previousRoute: null,\n      // bbox: null,\n      // depth: null,\n      // array breadcrumb of records\n      metadataListener: null,\n      drawing: false,\n      aerisSearchListener: null,\n      aerisResetListener: null,\n      backListener: null,\n      // default temporalExtent\n      temporalExtent: {min: '1900-01-01', max: 'now'},\n      previousRoutes: []\n    }\n  },\n  watch: {\n    $route (newroute, old) {\n//       if (old.params.uuid !== newroute.params.uuid) {\n//         this.previousRoutes.push(old)\n//       }\n      this.uuid = newroute.params.uuid\n      var previous = this.$store.getters['previousRoute']\n//       if (previous.params.uuid === this.uuid) {\n//         this.$store.commit('backChild')\n//         return\n//       }\n      if (old.path !== newroute.path) {\n        this.getFullMetadata()\n      }\n     // this.getMetadata()\n    }\n  },\n  created () {\n    \n    this.uuid = this.$route.params.uuid\n    this.getFullMetadata()\n   // this.getMetadata()\n    // this.$router.push({name: 'FormaterCatalogue'})\n    if (this.$route.query.sortBy) {\n      this.sortBy = this.$route.query.sortBy\n    } else {\n      this.sortBy = this.$store.state.orderBy\n    }\n    \n    this.initTemporalExtent()\n    // this.$gn.init(this.$i18n.locale, this.$store.state.geonetwork, this.$http, this.$store)\n//     this.metadataListener = this.receiveMetadata.bind(this)\n//     document.addEventListener('fmt:metadataEvent', this.metadataListener);\n//     this.aerisSearchListener = this.handleSearch.bind(this)\n//     document.addEventListener('aerisSearchEvent', this.aerisSearchListener)\n//     this.aerisResetListener = this.handleReset.bind(this)\n//     document.addEventListener('aerisResetEvent', this.aerisResetListener)\n    this.keydownListener = this.checkEscape.bind(this)\n    document.addEventListener('keydown', this.keydownListener)\n\n    // this.resize()\n\n//       var headers =  {\n//           'Accept': 'application/xml'\n//       }\n    \n//     this.$http.get('https://gravi165.step.univ-paris-diderot.fr/geonetwork/srv/api/0.1/records/86a28260-dc26-4b40-8433-9d06e9b9e628', {headers: headers})\n//     .then(resp => console.log(this.displayMeta(resp)))\n//     this.backListener = this.back.bind(this)\n//     window.addEventListener('beforeunload', this.backListener);\n  },\n  mounted () {\n//     var evt = new CustomEvent('fmt:pageChangedEvent')\n//     document.dispatchEvent(evt)\n   // if (!this.$store.state.metadata) {\n      // this.$router.push({name: 'FormaterCatalogue', query: {}})\n   // }\n  },\n  destroyed () {\n//     document.removeEventListener('fmt:metadataEvent', this.metadataListener);\n//     this.metadataListener = null;\n    document.removeEventListener('aerisSearchEvent', this.aerisSearchListener)\n    this.aerisSearchListener = null\n    document.removeEventListener('aerisResetEvent', this.aerisResetListener)\n    this.aerisResetListener = null\n\n//     window.removeEventListener('beforeunload', this.backListener);\n//     this.backListener = null\n  },\n  methods: {\n//     displayMeta(obj) {\n//       console.log(obj.body) \n//     },\n    getFileMetadata () {\n      this.$http.get(this.$store.state.metadata)\n      .then(response => { this.treatmentSingle(response.body)})\n    },\n    getFullMetadata () {\n      this.metadata = null\n      // curl -X GET \"http://localhost:8280/geonetwork/srv/api/0.1/records/86a28260-dc26-4b40-8433-9d06e9b9e628/formatters/json?withInfo=true&attachment=false\" -H  \"accept: application/json;charset=utf-8\" -H  \"Accept: application/json\" -H  \"X-XSRF-TOKEN: null\"\n      var headers =  {\n          'accept': 'application/json;charset=utf-8',\n      }\n      var url = this.$store.state.geonetwork +  'srv/api/0.1/records/' + this.uuid + '/formatters/json?withInfo=true&attachment=false'\n      this.$http.get(url, {headers: headers}).then(\n          response => { this.treatmentFull(response.body)},\n          response => { console.log(response.body)})\n    },\n    getMetadata () {\n     if (this.$store.state.metadata) {\n       this.getFileMetadata()\n       return\n     }\n      var headers =  {\n          'Accept': 'application/json, text/plain, */*',\n          'Accept-Language': this.$store.state.lang === 'fr' ? 'fre': 'eng'\n      }\n//      _content_type: 'json',\n//       fast: 'index', // more quick\n//    //  'facet.q': '',\n//      bucket: 's101',\n// get json https://demo.formater/geonetwork/srv/eng/md.format.json?uuid=86a28260-dc26-4b40-8433-9d06e9b9e628&xsl=jsonld&schema=iso19139\n      var url = this.$store.state.geonetwork +  'srv/' + (this.$i18n.locale === 'fr'? 'fre' : 'eng') + '/'\n      url +=  'q?fast=index&bucket=s101&resultType=step1&_content_type=json&uuid=' + this.uuid\n      this.$http.get(url, {headers: headers}).then(\n        response => { this.treatmentMeta(response.body)},\n        response => { console.log(response.body)})\n    },\n    treatmentSingle(data) {\n      var uuid = data['geonet:info'].uuid\n      this.metadata = this.$gn.treatmentMetadata(data, uuid)\n     \n      this.metadata.appRoot = true\n      this.metadata.selected = this.$store.state.metadata === uuid\n      var feature = this.$gn.extractBbox(data.geoBox, uuid)\n      this.$router.replace({name: this.$route.name, params: {uuid: uuid}, query: this.$route.query})\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    treatmentMeta(data) {\n      this.metadata = this.$gn.treatmentMetadata(data.metadata ,this.uuid)\n      // console.log(JSON.stringify(this.metadata))\n      var feature = this.$gn.extractBbox(data.metadata.geoBox, this.uuid)\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    treatmentFull(data) {\n      var metadata = {\n      }\n      var langs = {}\n      var result = JSONPATH.query(data, '$..[\"gmd:language\"][\"gmd:LanguageCode\"]')\n      metadata['geonet:info'] = data['geonet:info']\n      metadata['geonet:info'].uuid = this.uuid\n      delete data['geonet:info']\n      metadata.id = this.uuid\n      // search main language code\n      var _locale = data['gmd:language']['gmd:LanguageCode']['@codeListValue']\n      metadata.mdLanguage = [_locale]\n      // search if translation\n      var others = data['gmd:locale']\n      var langs = {'fr': 'FR', 'en': 'EN'}\n      var _idLang = langs[this.$store.state.lang]\n      var _this = this\n      if (others && others.length > 0) {\n        others.forEach(function (locale) {\n          var lg = locale['gmd:PT_Locale']['gmd:languageCode']['gmd:LanguageCode']['@codeListValue'] === 'fre' ? 'fr' : 'en'\n          if (lg === _this.$store.state.lang) {\n            _idLang = locale['gmd:PT_Locale']['@id']\n          }\n          langs[lg] = locale['gmd:PT_Locale']['@id']\n        })\n      }\n      metadata.contacts = {metadata: {}, resource: {}}\n      for(var key in data) {\n        switch(key) {\n         case 'gmd:hierarchyLevel':\n           metadata.type = data[key]['gmd:MD_ScopeCode']['@codeListValue']\n           break\n         case 'gmd:contact':\n           var contacts = this.$gn.extractContacts(data[key]['gmd:CI_ResponsibleParty'], 'metadata', _idLang)\n           contacts.forEach (function (contact) {\n             if (metadata.contacts.metadata[contact[0]]) {\n                 metadata.contacts.metadata[contact[0]].push(contact)\n               } else {\n                 metadata.contacts.metadata[contact[0]] = [contact]\n               }\n           })\n           break\n         case 'gmd:parentIdentifier':\n           metadata.parentIdentifier = data[key]['gco:CharacterString']['#text'] ? data[key]['gco:CharacterString']['#text'] : data[key]['gco:CharacterString'] \n           break\n         case 'gmd:identificationInfo':\n           this.$gn.extractDataInfo(metadata, data[key]['gmd:MD_DataIdentification'], _idLang )\n           break\n         case 'gmd:distributionInfo':\n           this.$gn.extractDistributionInfo(metadata, data[key], _idLang)\n           break\n         case 'gmd:dataQualityInfo':\n           this.$gn.extractLineage(metadata, data[key], _idLang)\n           break\n        }\n      }\n      metadata.exportLinks = {\n        xml:  this.$store.state.geonetwork + 'srv/api/records/' + metadata.id + '/formatters/xml?attachment=true',\n        pdf:  this.$store.state.geonetwork + 'srv/api/records/' + metadata.id + '/formatters/xsl-view?root=div&output=pdf'\n      }\n      this.metadata = metadata\n      this.fullMetadata = data\n//       this.metadata = this.$gn.treatmentFull(data.metadata ,this.uuid)\n      var feature = this.$gn.extractBbox(metadata.geobox, this.uuid)\n      var temp = {\n          min: metadata.tempExtentBegin ? metadata.tempExtentBegin : this.temporalExtent.min,\n          max: metadata.tempExtentEnd ? metadata.tempExtentEnd : this.temporalExtent.max\n      }\n      this.$store.commit('temporalChange', temp)\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    initTemporalExtent () {\n      if(this.$store.state.temporalExtent && this.$store.state.temporalExtent.min) {\n        this.temporalExtent.min = this.$store.state.temporalExtent.min\n      }\n      if(this.$store.temporalExtent && this.$store.temporalExtent.max) {\n        this.temporalExtent.max = this.$store.temporalExtent.max\n      }\n    },\n    closeSingle () {\n      var event = new CustomEvent('fmt:closeMetadataEvent', {detail: {depth: -1}})\n      document.dispatchEvent(event)  \n      this.$store.commit('resetSelectedMetadata')\n    //  this.$store.commit('services/resetCurrent')\n    },\n    receiveMetadata (event) {\n      if (this.$store.state.metadata && this.first) {\n        this.first = false\n        this.metadataUui = event.detail.meta.id\n      }\n      // this.metadatas.push(event.detail.meta)\n      this.currentUuid = event.detail.meta.id\n      this.$store.commit('currentUuidChange', this.currentUuid)\n      var min = null\n      var max = null\n      var numBegins = 0\n      \n      if (typeof event.detail.meta.tempExtentBegin === 'string') {\n        min = event.detail.meta.tempExtentBegin.substring(0, 10)\n        numBegins = 1\n      } else if (typeof event.detail.meta.tempExtentBegin === 'object') {\n        var begins = event.detail.meta.tempExtentBegin.map(function (begin) { return begin.substring(0, 10)})\n        begins.sort()\n        min = begins[0]\n        numBegins = begins.length\n      } \n      if (typeof event.detail.meta.tempExtentEnd === 'string' && numBegins === 1) {\n        max = event.detail.meta.tempExtentEnd.substring(0, 10)\n      } else if (typeof event.detail.meta.tempExtentEnd === 'object' && event.detail.meta.tempExtentEnd.length === numBegins) {\n        var ended = event.detail.meta.tempExtentEnd.map(function(end) { return end.substring(0, 10)})\n        ended.sort()\n        max = ended[ended.length - 1]\n      }\n      var temp = {\n          min: min ? min : this.temporalExtent.min,\n          max: max ? max : this.temporalExtent.max\n      }\n      this.$store.commit('temporalChange', temp)\n     // this.$router.push({name: 'FormaterCatalogue', query:{uuid:event.detail.meta.id, depth: this.metadatas.length}})\n    },\n    close () {\n      var route = this.$store.getters['previousRoute'] \n      this.$store.commit('backChild')\n      this.$store.commit('temporalChange', this.$store.state.defaultTemporal)\n      this.$router.push({name: route.name, params: route.params, query: route.query})\n        \n    },\n    back () {\n      //e.preventDefault()\n//       if (this.$store.state.selectedMetadata) {\n//         this.$store.commit('resetSelectedMetadata')\n//       } else {\n//         this.resetMetadata()\n//       }\n    },\n    checkEscape (e) {\n        var event = e || window.event\n        var isEscape = false;\n        if (event.key) {\n          isEscape = (event.key === 'Escape' || event.key === 'Esc');\n        } else {\n          isEscape = (event.keyCode === 27);\n        }\n        if (isEscape) {\n           this.$router.go(-1)\n//          this.back()\n//           if (this.$store.state.selectedMetadata) {\n//             this.$store.commit('resetSelectedMetadata')\n//           } else {\n//             this.resetMetadata(e)\n//           }\n        }\n      },\n\n//     handleReset (event) {\n//    this.$store.commit('resetSelectedMetadata')\n//      if (this.metadatas[0] && this.metadatas[0].appRoot) {\n\n//        event.detail.depth = 1\n//        var metadata = this.metadatas[0]\n//        this.metadatas = this.metadatas.slice(0, 1)\n//        this.currentUuid = this.metadatas[0].id\n//        this.metadatas.length = 1\n//        this.metadatas[0].osParameters.forEach(function (parameter) {\n//            parameter.value = null\n//        })\n//        var parameters = this.metadatas[0].osParameters\n//        var mapping = this.metadatas[0].mapping\n//        var type = this.metadatas[0].disableType\n//        var min = null\n//        var max = null\n//        if (metadata.tempExtentBegin) {\n//          min = metadata.tempExtentBegin.substring(0, 10)\n//        }\n//        if (metadata.tempExtentEnd) {\n//          max = metadata.tempExtentEnd.substring(0, 10)\n//        }\n//        var temp = {\n//            min: min ? min : this.temporalExtent.min,\n//            max: max ? max : this.temporalExtent.max\n//        }\n//        this.$store.commit('temporalChange', temp)\n//        this.$store.commit('currentUuidChange', this.currentUuid)\n//        this.$store.commit('parametersChange', {parameters: parameters, mapping: mapping, type: type})\n\n//      } else {\n//       event.detail.depth = 0\n//       this.metadatas = []\n//       this.metadatas.length = 0\n//       this.currentUuid = null\n//       this.$store.commit('currentUuidChange', this.currentUuid)\n//       this.$store.commit('parametersChange', {parameters: [], mapping: [], type: 'geonetwork'})\n//      }\n//     },\n//     handleSearch (event) {\n//       // mettre plutôt dans formater-metadata ??\n//       if (this.metadatas.length > 0) {\n//         event.detail.parentUuid = this.currentUuid\n//       }\n//     },\n    setParameters (obj) {\n//       if (obj.depth) {\n//         this.metadatas[obj.depth - 1].osParameters = obj.osParameters\n//         this.metadatas[obj.depth - 1].mapping = obj.mapping\n//         this.metadatas[obj.depth - 1].disableType = obj.disableType\n//       }\n//       if (obj.depth === this.metadatas.length) {\n        this.$store.commit('parametersChange', {parameters: obj.osParameters, mapping: obj.mapping, fixed: obj.fixed, type: obj.type})\n//     }\n    },\n    closeError () {\n      this.$store.commit('removeError')\n    }\n  }\n}\n</script>\n<style>\n\n</style>","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=script&lang=js&\"","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"","import { render, staticRenderFns } from \"./formater-single.vue?vue&type=template&id=73cb18fe&\"\nimport script from \"./formater-single.vue?vue&type=script&lang=js&\"\nexport * from \"./formater-single.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports"],"names":["module","exports","Component","options","__i18n","push","_Ctor","component","_vm","this","_c","_self","staticClass","_v","_s","metaDisplayed","attrs","$store","state","searching","$t","_e","error","on","closeError","selectedMetadata","closeSingle","metadata","fullMetadata","setParameters","close"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./src/formater-single.vue?55ca","webpack:///./src/formater-single.vue?462d","webpack:///./src/formater-single.vue?0526","webpack:///src/formater-single.vue","webpack:///./src/formater-single.vue?07f1","webpack:///./src/formater-single.vue"],"names":["module","exports","Component","options","__i18n","push","_Ctor","_node_modules_intlify_vue_i18n_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_formater_single_vue_vue_type_custom_index_0_blockType_i18n__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_intlify_vue_i18n_loader_lib_index_js_node_modules_vue_loader_lib_index_js_vue_loader_options_formater_single_vue_vue_type_custom_index_0_blockType_i18n__WEBPACK_IMPORTED_MODULE_0___default","n","__webpack_exports__","JSONPATH","src_formater_singlevue_type_script_lang_js_","name","components","FormaterDrawBbox","formater_draw_bbox","FormaterForm","formater_form","FormaterListMetadata","formater_list_metadata","FormaterMetadata","e","then","bind","FormaterPaging","formater_paging","AerisTheme","aeris_theme","data","metadata","fullMetadata","uuid","first","sortBy","metaDisplayed","previousRoute","metadataListener","drawing","aerisSearchListener","aerisResetListener","backListener","temporalExtent","min","max","previousRoutes","watch","$route","newroute","old","this","params","$store","getters","path","getFullMetadata","created","query","state","orderBy","initTemporalExtent","keydownListener","checkEscape","document","addEventListener","mounted","destroyed","removeEventListener","methods","getFileMetadata","_this2","$http","get","response","treatmentSingle","body","_this3","url","geonetwork","headers","accept","treatmentFull","console","log","getMetadata","_this4","Accept","Accept-Language","lang","$i18n","locale","treatmentMeta","$gn","treatmentMetadata","appRoot","feature","extractBbox","geoBox","$router","replace","event","CustomEvent","detail","meta","dispatchEvent","langs","id","_locale","mdLanguage","others","_idLang","fr","en","_this","key","length","forEach","lg","contacts","resource","type","extractContacts","contact","parentIdentifier","extractDataInfo","extractDistributionInfo","extractLineage","exportLinks","xml","pdf","geobox","temp","tempExtentBegin","tempExtentEnd","commit","closeSingle","depth","receiveMetadata","metadataUui","currentUuid","numBegins","substring","_typeof","begins","map","begin","sort","ended","end","close","route","defaultTemporal","back","window","keyCode","go","setParameters","obj","parameters","osParameters","mapping","closeError","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","attrs","disableLevel","$t","_e","on","click","error","selectedMetadata","full","parametersChange","formater_singlevue_type_custom_index_0_blockType_i18n"],"mappings":"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","file":"9.formater-metadata-vjs.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"searching\":\"Searching\"},\"fr\":{\"searching\":\"Recherche en cours\"}}')\n  delete Component.options._Ctor\n}\n","import mod from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"; export default mod; export * from \"-!../node_modules/@intlify/vue-i18n-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mtdt-catalogue\"},[_c('div',[_vm._v(_vm._s(_vm.metaDisplayed))]),_vm._v(\" \"),_c('formater-draw-bbox'),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"mtdt-column-left\"},[_c('formater-form',{attrs:{\"disableLevel\":1,\"depth\":1}})],1),_vm._v(\" \"),_c('div',{staticClass:\"mtdt-column-right\"},[_c('div',{attrs:{\"id\":\"fmtLargeMap\"}}),_vm._v(\" \"),(_vm.$store.state.searching)?_c('div',{staticClass:\"fmt-waiting\"},[_c('div',[_vm._v(_vm._s(_vm.$t('searching'))),_c('br'),_c('span',{staticClass:\"fa fa-spinner animated\"})])]):_vm._e(),_vm._v(\" \"),(_vm.$store.state.error)?_c('div',{staticClass:\"fmt-error\"},[_c('div',[_c('span',{staticClass:\"fa fa-close fmt-close\",on:{\"click\":_vm.closeError}}),_vm._v(_vm._s(_vm.$store.state.error))])]):_vm._e(),_vm._v(\" \"),(_vm.$store.state.selectedMetadata)?_c('div',{staticClass:\"mtdt-free-capsule\"},[_c('div',[_c('formater-metadata',{attrs:{\"metadata\":_vm.$store.state.selectedMetadata,\"depth\":-1},on:{\"close\":_vm.closeSingle}})],1)]):_vm._e(),_vm._v(\" \"),(_vm.metadata)?_c('formater-metadata',{attrs:{\"metadata\":_vm.metadata,\"full\":_vm.fullMetadata,\"depth\":1},on:{\"parametersChange\":_vm.setParameters,\"close\":_vm.close}}):_vm._e()],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * Main component\n */\n<i18n>{\n   \"en\":{\n     \"searching\": \"Searching\"\n   },\n   \"fr\":{\n     \"searching\": \"Recherche en cours\"\n   }\n}\n</i18n>\n<template>\n <div class=\"mtdt-catalogue\">\n <div>{{metaDisplayed}}</div>\n  <!-- components not visible  -->\n\n\n  <!-- component to draw bbox -->\n  <formater-draw-bbox ></formater-draw-bbox>\n\n  <div >\n   <!-- components can be view -->\n \n   <div class=\"mtdt-column-left\" >\n       <formater-form  :disableLevel=\"1\" :depth=\"1\"></formater-form>\n   </div>\n   <div class=\"mtdt-column-right\" >\n        <!-- div where append map when enlarge it -->\n        <div id=\"fmtLargeMap\"></div>\n        <!-- icon search -->\n        <div class=\"fmt-waiting\" v-if=\"$store.state.searching\"><div>{{$t('searching')}}<br /><span class=\"fa fa-spinner animated\"></span></div></div>\n        \n        <!--error msg -->\n        <div class=\"fmt-error\" v-if=\"$store.state.error\"><div><span class=\"fa fa-close fmt-close\" @click=\"closeError\"></span>{{$store.state.error}}</div></div>\n        \n        <!-- independant metadata -->\n        <div class=\"mtdt-free-capsule\" v-if=\"$store.state.selectedMetadata\" >\n          <div >\n            <formater-metadata :metadata=\"$store.state.selectedMetadata\" :depth=\"-1\" @close=\"closeSingle\"></formater-metadata>\n          </div>\n        </div>\n       <formater-metadata v-if=\"metadata\" :metadata=\"metadata\" :full=\"fullMetadata\" @parametersChange=\"setParameters\" @close=\"close\" :depth=\"1\"></formater-metadata>\n     \n        <!-- view of one record -->\n       <!--   <div>\n        <formater-metadata v-for=\"(meta, index) in metadatas\" :key=\"index\" v-show=\"index === metadatas.length-1\"\n         :depth=\"index + 1\" :metadata=\"meta\" @parametersChange=\"setParameters\"\n         @close=\"close\" ></formater-metadata>\n        </div> -->\n\n     </div>\n    </div>\n  </div>\n</template>\n<script>\nimport FormaterForm from './components/formater-form.vue';\nimport FormaterListMetadata from './components/formater-list-metadata.vue';\nconst FormaterMetadata = () => import('./components/formater-metadata.vue')\nimport FormaterPaging from './components/formater-paging.vue';\nimport FormaterDrawBbox from './components/formater-draw-bbox.vue';\nimport AerisTheme from 'aeris-commons-components-vjs/src/aeris-theme/aeris-theme.vue'\n\nconst JSONPATH = require('jsonpath')\n// prevent previous and next page for browser\n// function disableBack() { window.history.forward() }\n// window.onload = function () {\n//   disableBack();\n// }\n//   window.onpageshow = function(evt) { if (evt.persisted) disableBack() }\n//   window.onbeforeunload = function() { return \"Your work will be lost.\"; };\nexport default {\n  name: 'FormaterSingle',\n  components: {\n    FormaterDrawBbox,\n    FormaterForm,\n    FormaterListMetadata,\n    FormaterMetadata,\n    FormaterPaging,\n   // FormaterRequester,\n    AerisTheme\n  },\n  data() {\n    return {\n      metadata: null,\n      fullMetadata: null,\n      uuid: null,\n      first: true,\n      sortBy: '',\n      metaDisplayed: null,\n      previousRoute: null,\n      // bbox: null,\n      // depth: null,\n      // array breadcrumb of records\n      metadataListener: null,\n      drawing: false,\n      aerisSearchListener: null,\n      aerisResetListener: null,\n      backListener: null,\n      // default temporalExtent\n      temporalExtent: {min: '1900-01-01', max: 'now'},\n      previousRoutes: []\n    }\n  },\n  watch: {\n    $route (newroute, old) {\n//       if (old.params.uuid !== newroute.params.uuid) {\n//         this.previousRoutes.push(old)\n//       }\n      this.uuid = newroute.params.uuid\n      var previous = this.$store.getters['previousRoute']\n//       if (previous.params.uuid === this.uuid) {\n//         this.$store.commit('backChild')\n//         return\n//       }\n      if (old.path !== newroute.path) {\n        this.getFullMetadata()\n      }\n     // this.getMetadata()\n    }\n  },\n  created () {\n    \n    this.uuid = this.$route.params.uuid\n    this.getFullMetadata()\n   // this.getMetadata()\n    // this.$router.push({name: 'FormaterCatalogue'})\n    if (this.$route.query.sortBy) {\n      this.sortBy = this.$route.query.sortBy\n    } else {\n      this.sortBy = this.$store.state.orderBy\n    }\n    \n    this.initTemporalExtent()\n    // this.$gn.init(this.$i18n.locale, this.$store.state.geonetwork, this.$http, this.$store)\n//     this.metadataListener = this.receiveMetadata.bind(this)\n//     document.addEventListener('fmt:metadataEvent', this.metadataListener);\n//     this.aerisSearchListener = this.handleSearch.bind(this)\n//     document.addEventListener('aerisSearchEvent', this.aerisSearchListener)\n//     this.aerisResetListener = this.handleReset.bind(this)\n//     document.addEventListener('aerisResetEvent', this.aerisResetListener)\n    this.keydownListener = this.checkEscape.bind(this)\n    document.addEventListener('keydown', this.keydownListener)\n\n    // this.resize()\n\n//       var headers =  {\n//           'Accept': 'application/xml'\n//       }\n    \n//     this.$http.get('https://gravi165.step.univ-paris-diderot.fr/geonetwork/srv/api/0.1/records/86a28260-dc26-4b40-8433-9d06e9b9e628', {headers: headers})\n//     .then(resp => console.log(this.displayMeta(resp)))\n//     this.backListener = this.back.bind(this)\n//     window.addEventListener('beforeunload', this.backListener);\n  },\n  mounted () {\n//     var evt = new CustomEvent('fmt:pageChangedEvent')\n//     document.dispatchEvent(evt)\n   // if (!this.$store.state.metadata) {\n      // this.$router.push({name: 'FormaterCatalogue', query: {}})\n   // }\n  },\n  destroyed () {\n//     document.removeEventListener('fmt:metadataEvent', this.metadataListener);\n//     this.metadataListener = null;\n    document.removeEventListener('aerisSearchEvent', this.aerisSearchListener)\n    this.aerisSearchListener = null\n    document.removeEventListener('aerisResetEvent', this.aerisResetListener)\n    this.aerisResetListener = null\n\n//     window.removeEventListener('beforeunload', this.backListener);\n//     this.backListener = null\n  },\n  methods: {\n//     displayMeta(obj) {\n//       console.log(obj.body) \n//     },\n    getFileMetadata () {\n      this.$http.get(this.$store.state.metadata)\n      .then(response => { this.treatmentSingle(response.body)})\n    },\n    getFullMetadata () {\n      this.metadata = null\n      // curl -X GET \"http://localhost:8280/geonetwork/srv/api/0.1/records/86a28260-dc26-4b40-8433-9d06e9b9e628/formatters/json?withInfo=true&attachment=false\" -H  \"accept: application/json;charset=utf-8\" -H  \"Accept: application/json\" -H  \"X-XSRF-TOKEN: null\"\n      var headers =  {\n          'accept': 'application/json;charset=utf-8',\n      }\n      var url = this.$store.state.geonetwork +  'srv/api/0.1/records/' + this.uuid + '/formatters/json?withInfo=true&attachment=false'\n      this.$http.get(url, {headers: headers}).then(\n          response => { this.treatmentFull(response.body)},\n          response => { console.log(response.body)})\n    },\n    getMetadata () {\n     if (this.$store.state.metadata) {\n       this.getFileMetadata()\n       return\n     }\n      var headers =  {\n          'Accept': 'application/json, text/plain, */*',\n          'Accept-Language': this.$store.state.lang === 'fr' ? 'fre': 'eng'\n      }\n//      _content_type: 'json',\n//       fast: 'index', // more quick\n//    //  'facet.q': '',\n//      bucket: 's101',\n// get json https://demo.formater/geonetwork/srv/eng/md.format.json?uuid=86a28260-dc26-4b40-8433-9d06e9b9e628&xsl=jsonld&schema=iso19139\n      var url = this.$store.state.geonetwork +  'srv/' + (this.$i18n.locale === 'fr'? 'fre' : 'eng') + '/'\n      url +=  'q?fast=index&bucket=s101&resultType=step1&_content_type=json&uuid=' + this.uuid\n      this.$http.get(url, {headers: headers}).then(\n        response => { this.treatmentMeta(response.body)},\n        response => { console.log(response.body)})\n    },\n    treatmentSingle(data) {\n      var uuid = data['geonet:info'].uuid\n      this.metadata = this.$gn.treatmentMetadata(data, uuid)\n     \n      this.metadata.appRoot = true\n      var feature = this.$gn.extractBbox(data.geoBox, uuid)\n      this.$router.replace({name: this.$route.name, params: {uuid: uuid}, query: this.$route.query})\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    treatmentMeta(data) {\n      this.metadata = this.$gn.treatmentMetadata(data.metadata ,this.uuid)\n      // console.log(JSON.stringify(this.metadata))\n      var feature = this.$gn.extractBbox(data.metadata.geoBox, this.uuid)\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    treatmentFull(data) {\n      var metadata = {\n      }\n      var langs = {}\n      var result = JSONPATH.query(data, '$..[\"gmd:language\"][\"gmd:LanguageCode\"]')\n      metadata['geonet:info'] = data['geonet:info']\n      metadata['geonet:info'].uuid = this.uuid\n      delete data['geonet:info']\n      metadata.id = this.uuid\n      // search main language code\n      var _locale = data['gmd:language']['gmd:LanguageCode']['@codeListValue']\n      metadata.mdLanguage = [_locale]\n      // search if translation\n      var others = data['gmd:locale']\n      var langs = {'fr': 'FR', 'en': 'EN'}\n      var _idLang = langs[this.$store.state.lang]\n      var _this = this\n      if (others && others.length > 0) {\n        others.forEach(function (locale) {\n          var lg = locale['gmd:PT_Locale']['gmd:languageCode']['gmd:LanguageCode']['@codeListValue'] === 'fre' ? 'fr' : 'en'\n          if (lg === _this.$store.state.lang) {\n            _idLang = locale['gmd:PT_Locale']['@id']\n          }\n          langs[lg] = locale['gmd:PT_Locale']['@id']\n        })\n      }\n      metadata.contacts = {metadata: {}, resource: {}}\n      for(var key in data) {\n        switch(key) {\n         case 'gmd:hierarchyLevel':\n           metadata.type = data[key]['gmd:MD_ScopeCode']['@codeListValue']\n           break\n         case 'gmd:contact':\n           var contacts = this.$gn.extractContacts(data[key]['gmd:CI_ResponsibleParty'], 'metadata', _idLang)\n           contacts.forEach (function (contact) {\n             if (metadata.contacts.metadata[contact[0]]) {\n                 metadata.contacts.metadata[contact[0]].push(contact)\n               } else {\n                 metadata.contacts.metadata[contact[0]] = [contact]\n               }\n           })\n           break\n         case 'gmd:parentIdentifier':\n           metadata.parentIdentifier = data[key]['gco:CharacterString']['#text'] ? data[key]['gco:CharacterString']['#text'] : data[key]['gco:CharacterString'] \n           break\n         case 'gmd:identificationInfo':\n           this.$gn.extractDataInfo(metadata, data[key]['gmd:MD_DataIdentification'], _idLang )\n           break\n         case 'gmd:distributionInfo':\n           this.$gn.extractDistributionInfo(metadata, data[key], _idLang)\n           break\n         case 'gmd:dataQualityInfo':\n           this.$gn.extractLineage(metadata, data[key], _idLang)\n           break\n        }\n      }\n      metadata.exportLinks = {\n        xml:  this.$store.state.geonetwork + 'srv/api/records/' + metadata.id + '/formatters/xml?attachment=true',\n        pdf:  this.$store.state.geonetwork + 'srv/api/records/' + metadata.id + '/formatters/xsl-view?root=div&output=pdf'\n      }\n      this.metadata = metadata\n      this.fullMetadata = data\n//       this.metadata = this.$gn.treatmentFull(data.metadata ,this.uuid)\n      var feature = this.$gn.extractBbox(metadata.geobox, this.uuid)\n      var temp = {\n          min: metadata.tempExtentBegin ? metadata.tempExtentBegin : this.temporalExtent.min,\n          max: metadata.tempExtentEnd ? metadata.tempExtentEnd : this.temporalExtent.max\n      }\n      this.$store.commit('temporalChange', temp)\n      var event = new CustomEvent('fmt:metadataEvent', {detail:  {meta: this.metadata, feature:feature}})\n      document.dispatchEvent(event)\n    },\n    initTemporalExtent () {\n      if(this.$store.state.temporalExtent && this.$store.state.temporalExtent.min) {\n        this.temporalExtent.min = this.$store.state.temporalExtent.min\n      }\n      if(this.$store.temporalExtent && this.$store.temporalExtent.max) {\n        this.temporalExtent.max = this.$store.temporalExtent.max\n      }\n    },\n    closeSingle () {\n      var event = new CustomEvent('fmt:closeMetadataEvent', {detail: {depth: -1}})\n      document.dispatchEvent(event)\n      this.$store.commit('resetSelectedMetadata')\n    },\n    receiveMetadata (event) {\n      if (this.$store.state.metadata && this.first) {\n        this.first = false\n        this.metadataUui = event.detail.meta.id\n      }\n      // this.metadatas.push(event.detail.meta)\n      this.currentUuid = event.detail.meta.id\n      this.$store.commit('currentUuidChange', this.currentUuid)\n      var min = null\n      var max = null\n      var numBegins = 0\n      \n      if (typeof event.detail.meta.tempExtentBegin === 'string') {\n        min = event.detail.meta.tempExtentBegin.substring(0, 10)\n        numBegins = 1\n      } else if (typeof event.detail.meta.tempExtentBegin === 'object') {\n        var begins = event.detail.meta.tempExtentBegin.map(function (begin) { return begin.substring(0, 10)})\n        begins.sort()\n        min = begins[0]\n        numBegins = begins.length\n      } \n      if (typeof event.detail.meta.tempExtentEnd === 'string' && numBegins === 1) {\n        max = event.detail.meta.tempExtentEnd.substring(0, 10)\n      } else if (typeof event.detail.meta.tempExtentEnd === 'object' && event.detail.meta.tempExtentEnd.length === numBegins) {\n        var ended = event.detail.meta.tempExtentEnd.map(function(end) { return end.substring(0, 10)})\n        ended.sort()\n        max = ended[ended.length - 1]\n      }\n      var temp = {\n          min: min ? min : this.temporalExtent.min,\n          max: max ? max : this.temporalExtent.max\n      }\n      this.$store.commit('temporalChange', temp)\n     // this.$router.push({name: 'FormaterCatalogue', query:{uuid:event.detail.meta.id, depth: this.metadatas.length}})\n    },\n    close () {\n      var route = this.$store.getters['previousRoute'] \n      this.$store.commit('services/resetCurrent')\n      this.$store.commit('backChild')\n      this.$store.commit('temporalChange', this.$store.state.defaultTemporal)\n      this.$router.push({name: route.name, params: route.params, query: route.query})\n        \n    },\n    back () {\n      //e.preventDefault()\n//       if (this.$store.state.selectedMetadata) {\n//         this.$store.commit('resetSelectedMetadata')\n//       } else {\n//         this.resetMetadata()\n//       }\n    },\n    checkEscape (e) {\n        var event = e || window.event\n        var isEscape = false;\n        if (event.key) {\n          isEscape = (event.key === 'Escape' || event.key === 'Esc');\n        } else {\n          isEscape = (event.keyCode === 27);\n        }\n        if (isEscape) {\n           this.$router.go(-1)\n//          this.back()\n//           if (this.$store.state.selectedMetadata) {\n//             this.$store.commit('resetSelectedMetadata')\n//           } else {\n//             this.resetMetadata(e)\n//           }\n        }\n      },\n\n//     handleReset (event) {\n//    this.$store.commit('resetSelectedMetadata')\n//      if (this.metadatas[0] && this.metadatas[0].appRoot) {\n\n//        event.detail.depth = 1\n//        var metadata = this.metadatas[0]\n//        this.metadatas = this.metadatas.slice(0, 1)\n//        this.currentUuid = this.metadatas[0].id\n//        this.metadatas.length = 1\n//        this.metadatas[0].osParameters.forEach(function (parameter) {\n//            parameter.value = null\n//        })\n//        var parameters = this.metadatas[0].osParameters\n//        var mapping = this.metadatas[0].mapping\n//        var type = this.metadatas[0].disableType\n//        var min = null\n//        var max = null\n//        if (metadata.tempExtentBegin) {\n//          min = metadata.tempExtentBegin.substring(0, 10)\n//        }\n//        if (metadata.tempExtentEnd) {\n//          max = metadata.tempExtentEnd.substring(0, 10)\n//        }\n//        var temp = {\n//            min: min ? min : this.temporalExtent.min,\n//            max: max ? max : this.temporalExtent.max\n//        }\n//        this.$store.commit('temporalChange', temp)\n//        this.$store.commit('currentUuidChange', this.currentUuid)\n//        this.$store.commit('parametersChange', {parameters: parameters, mapping: mapping, type: type})\n\n//      } else {\n//       event.detail.depth = 0\n//       this.metadatas = []\n//       this.metadatas.length = 0\n//       this.currentUuid = null\n//       this.$store.commit('currentUuidChange', this.currentUuid)\n//       this.$store.commit('parametersChange', {parameters: [], mapping: [], type: 'geonetwork'})\n//      }\n//     },\n//     handleSearch (event) {\n//       // mettre plutôt dans formater-metadata ??\n//       if (this.metadatas.length > 0) {\n//         event.detail.parentUuid = this.currentUuid\n//       }\n//     },\n    setParameters (obj) {\n//       if (obj.depth) {\n//         this.metadatas[obj.depth - 1].osParameters = obj.osParameters\n//         this.metadatas[obj.depth - 1].mapping = obj.mapping\n//         this.metadatas[obj.depth - 1].disableType = obj.disableType\n//       }\n//       if (obj.depth === this.metadatas.length) {\n        this.$store.commit('parametersChange', {parameters: obj.osParameters, mapping: obj.mapping, type: obj.type})\n//     }\n    },\n    closeError () {\n      this.$store.commit('removeError')\n    }\n  }\n}\n</script>\n<style>\n\n</style>","import mod from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js!../node_modules/vue-loader/lib/index.js??vue-loader-options!./formater-single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./formater-single.vue?vue&type=template&id=23fa7549&\"\nimport script from \"./formater-single.vue?vue&type=script&lang=js&\"\nexport * from \"./formater-single.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./formater-single.vue?vue&type=custom&index=0&blockType=i18n\"\nif (typeof block0 === 'function') block0(component)\n\nexport default component.exports"],"sourceRoot":""}
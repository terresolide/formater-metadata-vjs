(self.webpackChunkformater_metadata_vjs=self.webpackChunkformater_metadata_vjs||[]).push([[503],{7773:t=>{t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"fr":{"command_to_execute":"Commande curl à executer pour télécharger cette archive","copied_clipboard":"La commande a été enregistrée dans votre presse-papier.","copy_clipboard":"Copier la commande dans le presse-papier","title":"Télécharger en ligne de commande avec curl"},"en":{"command_to_execute":"Curl command to execute to download this archive","copied_clipboard":"The command has been copied in clipboard.","copy_clipboard":"Copy the command in clipboard","title":"Download from command line with curl"}}'),delete t.options._Ctor}},9514:(t,e,i)=>{(e=i(3645)(!1)).push([t.id,"\n.fmt-console[data-v-046caaee] {\n   position: fixed;\n   top: 50%;\n   left: 50%;\n   z-index:3;\n   background: white;\n   width:90%;\n   max-width: 900px;\n   padding:10px;\n   word-break: break-all;\n   transform: translate(-50%, -50%);\n   border-radius: 3px;\n   box-shadow: 2px 3px 3px 3px rgba(0, 0, 0, 0.5);\n}\n.fmt-close[data-v-046caaee] {\n  border:1px dotted white;\n  padding: 3px;\n  border-radius:3px;\n  cursor: pointer;\n}\n.fmt-close[data-v-046caaee]:hover {\n  border-color:black;\n}\na.tooltip-show + .clipboard-tooltip[data-v-046caaee] {\n  display:block;\n}\n",""]),t.exports=e},2503:(t,i,o)=>{"use strict";o.r(i),o.d(i,{default:()=>c});const n={name:"FormaterCommandLine",data:function(){return{href:null,token:null,file:null,commandEventListener:null}},created:function(){this.commandEventListener=this.receiveEvent.bind(this),document.addEventListener("fmt:commandEvent",this.commandEventListener)},destroyed:function(){document.removeEventListener("fmt:commandEvent",this.commandEventListener),this.commandEventListener=null},methods:{close:function(){this.href=null,this.token=null,this.file=null,this.cds=null,this.id=null},copy2clipboard:function(t){console.log("copy to clipboard");var e=t.target,i="curl "+this.href+"?_bearer="+this.token+" -o "+this.file;navigator.clipboard.writeText(i).then((function(){e.classList.add("tooltip-show"),setTimeout((function(){e.classList.remove("tooltip-show")}),6e3)}),(function(){alert(_this.$i18n.t("unauthorized_clipboard"))})),this.record()},record:function(){if(this.$store.state.recordUrl){var t={email:this.$store.getters["user/email"],cds:this.cds,app:this.$store.state.app,domain:window.location.hostname,fullpath:this.$route.fullPath,path:this.$route.path,uuid:this.id,link:this.href,type:"commandLine",orgtype:this.$store.getters["user/type"]};this.$http.post(this.$store.state.recordUrl,t,{emulateJSON:!0}).then((function(t){e.target.nextElementSibling.click()}),(function(t){e.target.nextElementSibling.click()}))}},receiveEvent:function(t){this.href=t.detail.link.url,this.token=t.detail.token,this.cds=t.detail.cds,this.id=t.detail.id;var e=this.href.substring(this.href.lastIndexOf("/")+1);new RegExp("/.[^.]+$/"),e.match(/\.[^.]+$/)?this.file=e:t.detail.link.mimeType?(console.log(t.detail.link.mimeType),"application/zip"===t.detail.link.mimeType.toLowerCase()?this.file=t.detail.title+".zip":(this.file=null,this.href=null,this.token=null)):(this.file=null,this.href=null,this.token=null)},removeTooltip:function(){var t=this.$el.querySelector(".tooltip-show");t&&t.classList.remove("tooltip-show")}}};o(7630);var a=o(1900),l=o(7773);const s=o.n(l)();var r=(0,a.Z)(n,(function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.href,expression:"href"}],staticClass:"fmt-console"},[e("div",{staticClass:"fmt-close",staticStyle:{position:"absolute",right:"5px",top:"3px"},on:{click:t.close}}),t._v(" "),e("h3",[t._v(t._s(t.$t("title")))]),t._v(" "),e("div",[e("div",[e("b",[t._v("Archive")]),t._v(": "+t._s(t.file))]),t._v(" "),e("div",[e("b",[t._v(t._s(t.$t("command_to_execute"))+":")])]),t._v(" "),e("div",{staticStyle:{display:"inline-block","font-family":"monospace","max-height":"200px",overflow:"scroll",padding:"3px",width:"calc(100% - 100px)",color:"#5ddc5d",background:"#333"}},[t._v("\n\t  curl "+t._s(t.href)+"?_bearer="+t._s(t.token)+" -o "+t._s(t.file)+"\n\t  ")]),t._v(" "),e("div",{staticStyle:{display:"inline-block","vertical-align":"top","max-width":"90px"}},[e("a",{staticClass:"fmt-button fa fa-clipboard",attrs:{title:t.$t("copy_clipboard")},on:{click:function(e){return t.copy2clipboard(e)}}},[t._v(" Copier")]),t._v(" "),e("div",{staticClass:"clipboard-tooltip",on:{click:t.removeTooltip}},[t._v(t._s(t.$t("copied_clipboard")))])])])])}),[],!1,null,"046caaee",null);"function"==typeof s&&s(r);const c=r.exports},7630:(t,e,i)=>{var o=i(9514);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals),(0,i(5346).Z)("2c749a30",o,!0,{})}}]);
//# sourceMappingURL=503.formater-metadata-vjs.js.map